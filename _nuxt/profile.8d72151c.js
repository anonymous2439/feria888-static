import{a as F,u as A,b as G}from"./entry.93a1389f.js";import{q as l,H as u,L as e,U as m,V as h,u as o,I as q,J as W,a as P,M as se,N as v,O as ne,Q as k,R as C,W as J,x as oe}from"./swiper-vue.cf378b39.js";import{u as w}from"./fetch.52ca4c6c.js";import{u as I}from"./cookie.c4b0a78d.js";const Q=p=>(q("data-v-7da04d97"),p=p(),W(),p),te={class:"cpassword-modal"},ae={class:"cpassword-modal-con"},le=Q(()=>e("h2",null,"Change Password",-1)),ie=Q(()=>e("br",null,null,-1)),re={__name:"ChangePassword",setup(p){const g=G(),$=A("cpassword_is_active"),_=I("user_info");let t={current_password:"",new_password:"",new_password_confirmation:""};async function f(){const{data:S,pending:a,refresh:i}=await w(`${g.public.baseURL}/api/user/changepassword`,{method:"POST",body:JSON.stringify(t),headers:{Authorization:"Bearer "+_.value.token}},"$hbqUopKmcA");_.value=S.value,window.location.reload(!0)}return(S,a)=>(l(),u("div",te,[e("div",{class:"cpassword-modal-overlay modal-overlay",onClick:a[0]||(a[0]=()=>{$.value=!1})}),e("div",ae,[le,ie,m(e("input",{"onUpdate:modelValue":a[1]||(a[1]=i=>o(t).current_password=i),placeholder:"Current Password",type:"password"},null,512),[[h,o(t).current_password]]),m(e("input",{"onUpdate:modelValue":a[2]||(a[2]=i=>o(t).new_password=i),placeholder:"New Password",type:"password"},null,512),[[h,o(t).new_password]]),m(e("input",{"onUpdate:modelValue":a[3]||(a[3]=i=>o(t).new_password_confirmation=i),placeholder:"Confirm New Password",type:"password"},null,512),[[h,o(t).new_password_confirmation]]),e("button",{onClick:a[4]||(a[4]=i=>$.value=!1),class:"btn-input btn-input--cancel"},"Cancel"),e("button",{onClick:f,class:"btn-input btn-input--submit"},"Submit")])]))}},ue=F(re,[["__scopeId","data-v-7da04d97"]]);const d=p=>(q("data-v-c50d1af9"),p=p(),W(),p),de={class:"profile-page"},ce={class:"wrapper"},pe=d(()=>e("h2",{class:"page-title"},"User Profile",-1)),_e=d(()=>e("br",null,null,-1)),me={class:"profile-nav"},he=d(()=>e("span",{class:"slider round"},"EDIT",-1)),fe={key:0},be={key:0},ve=d(()=>e("li",null,"test",-1)),we=[ve],ge=d(()=>e("b",null,"Email:",-1)),ye={key:0},ke=d(()=>e("b",null,"Phone Number:",-1)),Ce={key:0},$e=d(()=>e("b",null,"Coin Balance:",-1)),Se={key:0},Ue=d(()=>e("b",null,"Wallet Ballance:",-1)),Ae={key:1,class:"agent-panel"},Pe=d(()=>e("h2",{class:"page-title"},"Transfer",-1)),Be=["onSubmit"],Te=d(()=>e("button",{type:"submit"},"Search",-1)),Ie={class:"user-details"},Ve=["value"],xe=["value"],Le=["onSubmit"],Ne=d(()=>e("button",null,"Load Coins",-1)),Oe={class:"error-message"},Re={__name:"profile",async setup(p){let g,$;const _=G(),t=I("user_info").value,f=A("is_editing_profile",()=>!1),S=A("cpassword_is_active",()=>!1),a=A("profile_form",()=>{}),i=A("user_search"),V=P(),x=P(),L=P(),B=P(!1);a.value={email:t.user.email,phone_number:t.user.phone_number,coins:t.user.coins.length>0?t.user.coins[0].coin_balance:0};const T={value:null};let r={id:null,username:null,coins:null,amount:null};function j(){f.value=!f.value}async function H(){const s=I("user_info");await w(`${_.public.baseURL}/api/user/update`,{method:"POST",headers:{Authorization:"Bearer "+s.token},body:JSON.stringify(a.value)},"$62j1b1lrVm"),window.location.reload(!0)}function U(){var s,n;return((n=(s=t==null?void 0:t.user)==null?void 0:s.user_type)==null?void 0:n.name)=="agent"}function K(){var s,n;return((n=(s=t==null?void 0:t.user)==null?void 0:s.user_type)==null?void 0:n.name)=="admin"}async function Y(){var b;const{data:s,pending:n,refresh:y}=await w(`${_.public.baseURL}/api/user/search/${T.value}`,{method:"GET",headers:{Authorization:"Bearer "+t.token}},"$BME5qJrpDM");s.value?(i.value=s.value,r.id=s.value.id,r.username=s.value.username,r.email=s.value.email,r.phone_number=s.value.phone_number,r.coins=(b=s==null?void 0:s.value.coins[0])==null?void 0:b.coin_balance):console.log("An error occurred")}async function X(){const s=await Z(r.amount);if(s.success>0){const{data:n,pending:y,refresh:b}=await w(`${_.public.baseURL}/api/coins/load`,{method:"POST",body:JSON.stringify({user_id:r.id,amount:r.amount}),headers:{Authorization:"Bearer "+t.token}},"$cbRhwrLY3P");n.value?i.value=n.value:console.log("An error occurred")}else V.value=s.message}async function Z(s){const{data:n,pending:y,refresh:b}=await w(`${_.public.baseURL}/api/wallet/deduct`,{method:"POST",body:JSON.stringify({amount:s}),headers:{Authorization:"Bearer "+t.token}},"$FTQtyeom9v");if(!n)console.log("An error occurred");else return n.value}if(U()){const{data:s,pending:n,refresh:y}=([g,$]=se(()=>w(`${_.public.baseURL}/api/agent/info`,{method:"GET",headers:{Authorization:"Bearer "+t.token}},"$gMAiDryzga")),g=await g,$(),g);s?x.value=s.value.agent:console.log("An error occurred")}async function ee(){const{data:s,pending:n,refresh:y}=await w(`${_.public.baseURL}/api/agent/online`,{method:"GET",headers:{Authorization:"Bearer "+t.token}},"$IBCCILbvGE");s?(L.value=s.value.agents,console.log(L),B.value=!0,console.log(B)):console.log("An error occurred")}return(s,n)=>{var b,N,O,R,E,z,D,M;const y=ue;return l(),u("div",de,[e("div",ce,[pe,_e,e("div",me,[e("a",null,[e("label",{class:"switch"},[e("input",{type:"checkbox",onClick:j}),he])]),e("a",{onClick:n[0]||(n[0]=c=>S.value=!0),class:"btn-input btn-input--change"},"Change Password"),!U()&&!K()?(l(),u("a",fe,"Cash-In / Cash-Out")):v("",!0),U()?(l(),u(ne,{key:1},[e("a",{onClick:ee},k(o(x).status),1),o(B)?(l(),u("ul",be,we)):v("",!0)],64)):v("",!0)]),e("ul",null,[e("li",null,[ge,C("   "),o(f)==!1?(l(),u("span",ye,k(o(a).email),1)):m((l(),u("input",{key:1,"onUpdate:modelValue":n[1]||(n[1]=c=>o(a).email=c),type:"email"},null,512)),[[h,o(a).email]])]),e("li",null,[ke,C("   "),o(f)==!1?(l(),u("span",Ce,k(o(a).phone_number),1)):m((l(),u("input",{key:1,"onUpdate:modelValue":n[2]||(n[2]=c=>o(a).phone_number=c)},null,512)),[[h,o(a).phone_number]])]),e("li",null,[$e,C("   "),e("span",null,k(o(a).coins),1)]),U()?(l(),u("li",Se,[Ue,e("span",null,k(((R=(O=(N=(b=o(t))==null?void 0:b.user)==null?void 0:N.wallets)==null?void 0:O[0])==null?void 0:R.wallet_balance)||0),1)])):v("",!0)]),o(f)?(l(),u("button",{key:0,onClick:H,class:"btn-input btn-input--submit"},"Submit")):v("",!0),U()?(l(),u("div",Ae,[Pe,e("form",{onSubmit:J(Y,["prevent"])},[m(e("input",{"onUpdate:modelValue":n[3]||(n[3]=c=>T.value=c),placeholder:"ID / Username"},null,512),[[h,T.value]]),Te],40,Be),e("div",Ie,[e("p",null,[C("ID: "),m(e("input",{"onUpdate:modelValue":n[4]||(n[4]=c=>o(r).id=c),disabled:""},null,512),[[h,o(r).id]])]),e("p",null,[C("Username: "),e("input",{value:((E=o(i))==null?void 0:E.username)||"",disabled:""},null,8,Ve)]),e("p",null,[C("Coin balance: "),e("input",{value:((M=(D=(z=o(i))==null?void 0:z.coins)==null?void 0:D[0])==null?void 0:M.coin_balance)||0,disabled:""},null,8,xe)]),e("form",{onSubmit:J(X,["prevent"])},[m(e("input",{"onUpdate:modelValue":n[5]||(n[5]=c=>o(r).amount=c),placeholder:"Amount"},null,512),[[h,o(r).amount]]),Ne],40,Le),e("p",Oe,k(o(V)),1)])])):v("",!0)]),o(S)?(l(),oe(y,{key:0})):v("",!0)])}}},Je=F(Re,[["__scopeId","data-v-c50d1af9"]]);export{Je as default};
