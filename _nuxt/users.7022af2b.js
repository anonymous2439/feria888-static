import{a as w,b as u,u as g}from"./entry.0198b08c.js";import{q as i,I as _,J as e,O as G,L as r,M as y,u as o,P as q,Q as $,R as C,U as c,V as U,H as A,z as J,y as H,x as S,W as B,X as Q,Y as W}from"./swiper-vue.f0e207ac.js";import{u as x}from"./cookie.eb3dc8a4.js";import{u as T}from"./fetch.a72c9575.js";const Y={},X={class:"datatables"};function j(m,d){return i(),_("div",X,[e("table",null,[G(m.$slots,"default")])])}const K=w(Y,[["render",j]]);const Z={class:"add-modal"},ee={class:"add-modal-con"},te=["value","selected"],oe={style:{color:"black"}},se={__name:"AddUser",setup(m){const d=g(),v=u("add_modal_is_active"),f=x("user_info"),{value:p}=u("user_types");let s={type_id:p.length>0?p[0].id:null};async function l(){(await $fetch(`${d.public.baseURL}/api/user/add`,{method:"POST",headers:{Authorization:"Bearer "+f.value.token},body:JSON.stringify(s)})).user&&(message.value="You have successfully added a user!"),window.location.reload(!0)}return(b,a)=>(i(),_("div",Z,[e("div",{class:"add-modal-overlay modal-overlay",onClick:a[0]||(a[0]=()=>{v.value=!1})}),e("div",ee,[r(e("input",{"onUpdate:modelValue":a[1]||(a[1]=t=>o(s).username=t),placeholder:"Username",type:"text",required:""},null,512),[[y,o(s).username]]),r(e("input",{"onUpdate:modelValue":a[2]||(a[2]=t=>o(s).email=t),placeholder:"Email",type:"email",required:""},null,512),[[y,o(s).email]]),r(e("input",{"onUpdate:modelValue":a[3]||(a[3]=t=>o(s).password=t),placeholder:"Password",type:"password",requuired:""},null,512),[[y,o(s).password]]),r(e("input",{"onUpdate:modelValue":a[4]||(a[4]=t=>o(s).password_confirmation=t),placeholder:"Confirm Password",type:"password",required:""},null,512),[[y,o(s).password_confirmation]]),r(e("input",{"onUpdate:modelValue":a[5]||(a[5]=t=>o(s).phone_number=t),placeholder:"Phone Number",type:"text",required:""},null,512),[[y,o(s).phone_number]]),r(e("select",{"onUpdate:modelValue":a[6]||(a[6]=t=>o(s).type_id=t)},[(i(!0),_($,null,C(o(p),(t,n)=>(i(),_("option",{key:n,value:t.id,selected:n==0},c(t.name),9,te))),128))],512),[[q,o(s).type_id]]),e("p",oe,c(b.message),1),e("button",{onClick:l},"Add")])]))}},ae=w(se,[["__scopeId","data-v-da1f3528"]]);const ne={class:"edit-modal"},le={class:"edit-modal-con"},de=["value"],ie={style:{color:"black"}},re={__name:"EditUser",setup(m){const d=g(),v=u("edit_modal_is_active"),f=x("user_info"),{value:p}=u("user_types"),s=u("user_to_edit").value;console.log(s);let l={username:s.username,email:s.email,phone_number:s.phone_number,type_id:s.type_id?s.type_id:1};async function b(){await $fetch(`${d.public.baseURL}/api/user/edit/${s.id}`,{method:"POST",headers:{Authorization:"Bearer "+f.value.token},body:JSON.stringify(l)}),window.location.reload(!0)}return(a,t)=>(i(),_("div",ne,[e("div",{class:"edit-modal-overlay modal-overlay",onClick:t[0]||(t[0]=()=>{a.register_is_active=!1})}),e("div",le,[r(e("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>o(l).username=n),placeholder:"Username",type:"text",required:""},null,512),[[y,o(l).username]]),r(e("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>o(l).email=n),placeholder:"Email",type:"email",required:""},null,512),[[y,o(l).email]]),r(e("input",{"onUpdate:modelValue":t[3]||(t[3]=n=>o(l).phone_number=n),placeholder:"Phone Number",type:"text",required:""},null,512),[[y,o(l).phone_number]]),r(e("select",{"onUpdate:modelValue":t[4]||(t[4]=n=>o(l).type_id=n)},[(i(!0),_($,null,C(o(p),(n,E)=>(i(),_("option",{key:E,value:n.id},c(n.name),9,de))),128))],512),[[q,o(l).type_id]]),e("p",ie,c(a.message),1),e("a",{onClick:t[5]||(t[5]=n=>v.value=!1)},"Cancel"),U(" | "),e("a",{onClick:b},"Update")])]))}},ue=w(re,[["__scopeId","data-v-7c3f87d4"]]);const D=m=>(Q("data-v-a7d7a966"),m=m(),W(),m),_e={class:"users-page"},pe=D(()=>e("h2",{class:"page-title"},"Users",-1)),ce={class:"table-nav"},me=D(()=>e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Username"),e("th",null,"Email"),e("th",null,"Phone Number"),e("th",null,"User Type"),e("th",null,"Action")])],-1)),ve=["onClick"],ye=["onClick"],fe={__name:"users",async setup(m){let d,v;const f=g(),p=x("user_info"),s=u("add_modal_is_active",()=>!1),l=u("edit_modal_is_active",()=>!1),b=u("user_to_edit",()=>{}),a=u("content_is_loading");a.value=!0;const{data:t,pending:n,refresh:E}=([d,v]=A(()=>T(`${f.public.baseURL}/api/users`,{method:"GET",headers:{Authorization:"Bearer "+p.value.token}},"$5e9MclQqBH")),d=await d,v(),d),N=t.value,P=([d,v]=A(()=>$fetch(`${f.public.baseURL}/api/user/types`,{method:"GET",headers:{Authorization:"Bearer "+p.value.token}})),d=await d,v(),d);u("user_types",()=>P),a.value=!1;function I(k){l.value=!0,b.value=k}async function L(k){a.value=!0,await T(`${f.public.baseURL}/api/user/${k}`,{method:"DELETE",headers:{Authorization:"Bearer "+p.value.token}},"$wEBGSPm0FW"),window.location.reload(!0)}return(k,V)=>{const R=K,z=ae,M=ue;return i(),_($,null,[e("div",_e,[pe,e("div",ce,[e("a",{onClick:V[0]||(V[0]=()=>s.value=!o(s))},"Add")]),J(R,null,{default:H(()=>[me,e("tbody",null,[(i(!0),_($,null,C(o(N),(h,F)=>(i(),_("tr",{key:F},[e("td",null,c(h.id),1),e("td",null,c(h.username),1),e("td",null,c(h.email),1),e("td",null,c(h.phone_number),1),e("td",null,c(h.type),1),e("td",null,[U("("),e("a",{onClick:O=>I(h)},"Edit",8,ve),U(),e("a",{onClick:O=>L(h.id)},"Delete",8,ye),U(")")])]))),128))])]),_:1})]),o(s)?(i(),S(z,{key:0})):B("",!0),o(l)?(i(),S(M,{key:1})):B("",!0)],64)}}},$e=w(fe,[["__scopeId","data-v-a7d7a966"]]);export{$e as default};
