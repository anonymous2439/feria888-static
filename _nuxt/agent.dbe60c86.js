import{a as H,u as y,b as O}from"./entry.fa4e8077.js";import{a as h,M as G,H as J,L as e,Q as f,u as t,R as v,W as I,U as A,V as w,q as M,I as P,J as Q}from"./swiper-vue.cf378b39.js";import{u as d}from"./fetch.8ff68f8a.js";import{u as W}from"./cookie.d520ff94.js";const r=p=>(P("data-v-a1a2c789"),p=p(),Q(),p),K={class:"profile-page"},j={class:"wrapper"},q=r(()=>e("h2",{class:"page-title"},"Agent Panel",-1)),F=r(()=>e("br",null,null,-1)),X={class:"agent-nav"},Z=r(()=>e("b",null,"Coin Balance:",-1)),Y=r(()=>e("b",null,"Wallet Ballance:",-1)),ee={class:"agent-panel"},ae=r(()=>e("h2",{class:"page-title"},"Transfer",-1)),ne=["onSubmit"],se=r(()=>e("button",{type:"submit"},"Search",-1)),oe={class:"user-details"},te=["value"],le=["value"],ie=["onSubmit"],re=r(()=>e("button",null,"Load Coins",-1)),ue={class:"error-message"},ce={__name:"agent",async setup(p){let _,S;const u=O(),s=W("user_info").value;y("is_editing_profile",()=>!1);const U=y("profile_form",()=>{}),m=y("user_search"),k=h(),g=h();h(),h(!1),U.value={email:s.user.email,phone_number:s.user.phone_number,coins:s.user.coins.length>0?s.user.coins[0].coin_balance:0};const b={value:null};let o={id:null,username:null,coins:null,amount:null};function R(){var a,n;return((n=(a=s==null?void 0:s.user)==null?void 0:a.user_type)==null?void 0:n.name)=="agent"}async function N(){var i;const{data:a,pending:n,refresh:l}=await d(`${u.public.baseURL}/api/user/search/${b.value}`,{method:"GET",headers:{Authorization:"Bearer "+s.token}},"$N76yNykovQ");a.value?(m.value=a.value,o.id=a.value.id,o.username=a.value.username,o.email=a.value.email,o.phone_number=a.value.phone_number,o.coins=(i=a==null?void 0:a.value.coins[0])==null?void 0:i.coin_balance):console.log("An error occurred")}async function V(){const a=await D(o.amount);if(a.success>0){const{data:n,pending:l,refresh:i}=await d(`${u.public.baseURL}/api/coins/load`,{method:"POST",body:JSON.stringify({user_id:o.id,amount:o.amount}),headers:{Authorization:"Bearer "+s.token}},"$555HzAZetK");n.value?m.value=n.value:console.log("An error occurred")}else k.value=a.message}async function D(a){const{data:n,pending:l,refresh:i}=await d(`${u.public.baseURL}/api/wallet/deduct`,{method:"POST",body:JSON.stringify({amount:a}),headers:{Authorization:"Bearer "+s.token}},"$uUzxi01HnQ");if(!n)console.log("An error occurred");else return n.value}if(R()){const{data:a,pending:n,refresh:l}=([_,S]=G(()=>d(`${u.public.baseURL}/api/agent/info`,{method:"GET",headers:{Authorization:"Bearer "+s.token}},"$kIx7Haob48")),_=await _,S(),_);a?g.value=a.value:console.log("An error occurred")}async function E(){const{data:a,pending:n,refresh:l}=await d(`${u.public.baseURL}/api/agent/status/change`,{method:"GET",headers:{Authorization:"Bearer "+s.token}},"$hAkKzLXCRA");a&&(g.value=a.value.agent)}return(a,n)=>{var l,i,$,B,C,x,L,T,z;return M(),J("div",K,[e("div",j,[q,F,e("div",X,[e("a",{onClick:E,href:"javascript:;"},f((l=t(g))==null?void 0:l.status),1)]),e("ul",null,[e("li",null,[Z,v("   "),e("span",null,f(t(U).coins),1)]),e("li",null,[Y,e("span",null,f(((C=(B=($=(i=t(s))==null?void 0:i.user)==null?void 0:$.wallets)==null?void 0:B[0])==null?void 0:C.wallet_balance)||0),1)])]),e("div",ee,[ae,e("form",{onSubmit:I(N,["prevent"])},[A(e("input",{"onUpdate:modelValue":n[0]||(n[0]=c=>b.value=c),placeholder:"ID / Username"},null,512),[[w,b.value]]),se],40,ne),e("div",oe,[e("p",null,[v("ID: "),A(e("input",{"onUpdate:modelValue":n[1]||(n[1]=c=>t(o).id=c),disabled:""},null,512),[[w,t(o).id]])]),e("p",null,[v("Username: "),e("input",{value:((x=t(m))==null?void 0:x.username)||"",disabled:""},null,8,te)]),e("p",null,[v("Coin balance: "),e("input",{value:((z=(T=(L=t(m))==null?void 0:L.coins)==null?void 0:T[0])==null?void 0:z.coin_balance)||0,disabled:""},null,8,le)]),e("form",{onSubmit:I(V,["prevent"])},[A(e("input",{"onUpdate:modelValue":n[2]||(n[2]=c=>t(o).amount=c),placeholder:"Amount"},null,512),[[w,t(o).amount]]),re],40,ie),e("p",ue,f(t(k)),1)])])])])}}},he=H(ce,[["__scopeId","data-v-a1a2c789"]]);export{he as default};
