import{a as X,u as G,b as q}from"./entry.3be64904.js";import{a as k,M as O,H as y,L as e,Q as h,u as a,O as H,X as J,V as S,W as A,U as w,q as $,I as F,J as K}from"./swiper-vue.ab7c0c95.js";import{u as _}from"./fetch.8d7b9169.js";import{u as Z}from"./cookie.1a36ff8d.js";const l=m=>(F("data-v-4129c169"),m=m(),K(),m),Y={class:"profile-page"},ee={class:"wrapper"},ne=l(()=>e("h2",{class:"page-title"},"Agent Panel",-1)),te=l(()=>e("br",null,null,-1)),ae={class:"agent-nav"},se=l(()=>e("b",null,"Coin Balance: ",-1)),oe=l(()=>e("b",null,"Wallet Ballance: ",-1)),le=l(()=>e("b",null,"Link : ",-1)),ie=["href","value"],ue=l(()=>e("br",null,null,-1)),re=l(()=>e("a",{class:"btn-input btn-input--submit",href:"javascript:;"},"Save",-1)),ce=l(()=>e("br",null,null,-1)),de={class:"btn-input btn-input--linknotset",href:"agent_info?.link || 'javascript:;'",target:"_blank"},pe={class:"agent-panel"},_e=l(()=>e("h2",{class:"page-title"},"Transfer",-1)),he=["onSubmit"],me=l(()=>e("button",{class:"btn-input btn-input--search",type:"submit"},"Search",-1)),be={class:"user-details"},ve=["value"],fe=["value"],ge=["onSubmit"],ke=l(()=>e("button",{class:"btn-input btn-input--load"},"Load Coins",-1)),ye={class:"error-message"},Se={__name:"agent",async setup(m){let i,b;const d=q(),o=Z("user_info").value,L=G("profile_form",()=>{}),v=G("user_search"),U=k(),u=k(),f=k(!1);L.value={email:o.user.email,phone_number:o.user.phone_number,coins:o.user.coins.length>0?o.user.coins[0].coin_balance:0};const g={value:null};let s={id:null,username:null,coins:null,amount:null};const{data:C}=([i,b]=O(()=>_(`${d.public.baseURL}/api/agent/info`,{method:"GET",headers:{Authorization:"Bearer "+o.token}},"$N76yNykovQ")),i=await i,b(),i);C&&(u.value=C,console.log(u));async function M(){var r;const{data:n,pending:t,refresh:p}=await _(`${d.public.baseURL}/api/user/search/${g.value}`,{method:"GET",headers:{Authorization:"Bearer "+o.token}},"$555HzAZetK");n.value?(v.value=n.value,s.id=n.value.id,s.username=n.value.username,s.email=n.value.email,s.phone_number=n.value.phone_number,s.coins=(r=n==null?void 0:n.value.coins[0])==null?void 0:r.coin_balance):console.log("An error occurred")}async function P(){const n=await Q(s.amount);if(n.success>0){const{data:t,pending:p,refresh:r}=await _(`${d.public.baseURL}/api/coins/load`,{method:"POST",body:JSON.stringify({user_id:s.id,amount:s.amount}),headers:{Authorization:"Bearer "+o.token}},"$uUzxi01HnQ");t.value?v.value=t.value:console.log("An error occurred")}else U.value=n.message}async function Q(n){const{data:t,pending:p,refresh:r}=await _(`${d.public.baseURL}/api/wallet/deduct`,{method:"POST",body:JSON.stringify({amount:n}),headers:{Authorization:"Bearer "+o.token}},"$kIx7Haob48");if(!t)console.log("An error occurred");else return t.value}const{data:B,pending:Ae,refresh:we}=([i,b]=O(()=>_(`${d.public.baseURL}/api/agent/info`,{method:"GET",headers:{Authorization:"Bearer "+o.token}},"$hAkKzLXCRA")),i=await i,b(),i);B?u.value=B.value:console.log("An error occurred");async function W(){const{data:n,pending:t,refresh:p}=await _(`${d.public.baseURL}/api/agent/status/change`,{method:"GET",headers:{Authorization:"Bearer "+o.token}},"$qSGDNSLi4X");n&&(u.value=n.value.agent)}return(n,t)=>{var p,r,T,x,z,I,R,N,j,D,E,V;return $(),y("div",Y,[e("div",ee,[ne,te,e("div",ae,[e("a",{class:"btn-input btn-input--agent-cancel",onClick:W,href:"javascript:;"},h((p=a(u))==null?void 0:p.status),1)]),e("ul",null,[e("li",null,[se,e("span",null,h(a(L).coins),1)]),e("li",null,[oe,e("span",null,h(((z=(x=(T=(r=a(o))==null?void 0:r.user)==null?void 0:T.wallets)==null?void 0:x[0])==null?void 0:z.wallet_balance)||0),1)]),e("li",null,[le,a(f)?($(),y(H,{key:0},[e("input",{href:((I=a(u))==null?void 0:I.link)||"javascript:;",target:"_blank",value:((R=a(u))==null?void 0:R.link)||"Link not set"},null,8,ie),ue,e("a",{class:"btn-input btn-input--agent-cancel",href:"javascript:;",onClick:t[0]||(t[0]=c=>f.value=!1)},"Cancel"),re],64)):($(),y(H,{key:1},[ce,e("a",de,h(((N=a(u))==null?void 0:N.link)||"Link not set"),1),e("a",{class:"btn-input btn-input--edit",href:"javascript:;",onClick:t[1]||(t[1]=c=>f.value=!0)},"EDIT")],64))])]),e("div",pe,[_e,e("form",{onSubmit:J(M,["prevent"])},[S(e("input",{"onUpdate:modelValue":t[2]||(t[2]=c=>g.value=c),placeholder:"ID / Username"},null,512),[[A,g.value]]),me],40,he),e("div",be,[e("p",null,[S(e("input",{"onUpdate:modelValue":t[3]||(t[3]=c=>a(s).id=c),disabled:""},null,512),[[A,a(s).id]]),w(": ID")]),e("p",null,[e("input",{value:((j=a(v))==null?void 0:j.username)||"",disabled:""},null,8,ve),w(": Username")]),e("p",null,[e("input",{value:((V=(E=(D=a(v))==null?void 0:D.coins)==null?void 0:E[0])==null?void 0:V.coin_balance)||0,disabled:""},null,8,fe),w(": Coin Balance")]),e("form",{onSubmit:J(P,["prevent"])},[S(e("input",{"onUpdate:modelValue":t[4]||(t[4]=c=>a(s).amount=c),placeholder:"Amount"},null,512),[[A,a(s).amount]]),ke],40,ge),e("p",ye,h(a(U)),1)])])])])}}},Be=X(Se,[["__scopeId","data-v-4129c169"]]);export{Be as default};
