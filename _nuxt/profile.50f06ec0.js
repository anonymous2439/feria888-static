import{a as V,b as v,u as P}from"./entry.822f28b1.js";import{q as t,I as u,J as s,L as m,M as f,u as o,H as $,V as h,U as k,W as C,x as B}from"./swiper-vue.f0e207ac.js";import{u as b}from"./fetch.7e6c6fa9.js";import{u as g}from"./cookie.27739ceb.js";const N={class:"cpassword-modal"},S={class:"cpassword-modal-con"},T={__name:"ChangePassword",setup(U){const d=P(),w=v("cpassword_is_active"),c=g("user_info");let a={current_password:"",new_password:"",new_password_confirmation:""};async function r(){const{data:p,pending:e,refresh:n}=await b(`${d.public.baseURL}/api/user/changepassword`,{method:"POST",body:JSON.stringify(a),headers:{Authorization:"Bearer "+c.value.token}},"$hbqUopKmcA");c.value=p.value,console.log(p.value)}return(p,e)=>(t(),u("div",N,[s("div",{class:"cpassword-modal-overlay modal-overlay",onClick:e[0]||(e[0]=()=>{w.value=!1})}),s("div",S,[m(s("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>o(a).current_password=n),placeholder:"Current Password",type:"password"},null,512),[[f,o(a).current_password]]),m(s("input",{"onUpdate:modelValue":e[2]||(e[2]=n=>o(a).new_password=n),placeholder:"New Password",type:"password"},null,512),[[f,o(a).new_password]]),m(s("input",{"onUpdate:modelValue":e[3]||(e[3]=n=>o(a).new_password_confirmation=n),placeholder:"Confirm New Password",type:"password"},null,512),[[f,o(a).new_password_confirmation]]),s("button",{onClick:r},"Submit")])]))}},E=V(T,[["__scopeId","data-v-5dc7729c"]]),A={class:"profile-page"},M={class:"wrapper"},D=s("h2",{class:"page-title"},"User Profile",-1),J={key:0},L={key:0},F={__name:"profile",async setup(U){let d,w;const c=P(),a=g("user_info"),r=v("is_editing_profile",()=>!1),p=v("cpassword_is_active",()=>!1),e=v("profile_form",()=>({email:"",phone_number:""}));if(a.value){const{data:_,pending:i,refresh:y}=([d,w]=$(()=>b(`${c.public.baseURL}/api/user/get`,{method:"GET",headers:{Authorization:"Bearer "+a.value.token}},"$62j1b1lrVm")),d=await d,w(),d);if(_.value!==null){const l=_.value;e.value={email:l.email,phone_number:l.phone_number},console.log(e.value),console.log(_.value)}}else window.location.replace("/");function n(){r.value=!r.value}async function x(){const _=g("user_info");await b(`${c.public.baseURL}/api/user/update`,{method:"POST",headers:{Authorization:"Bearer "+_.value.token},body:JSON.stringify(e.value)},"$BME5qJrpDM"),window.location.reload(!0)}return(_,i)=>{const y=E;return t(),u("div",A,[s("div",M,[D,s("a",{onClick:n},"Edit"),h(),s("a",{onClick:i[0]||(i[0]=l=>p.value=!0)},"Change Password"),s("ul",null,[s("li",null,[h(" Email: "),o(r)==!1?(t(),u("span",J,k(o(e).email),1)):m((t(),u("input",{key:1,"onUpdate:modelValue":i[1]||(i[1]=l=>o(e).email=l)},null,512)),[[f,o(e).email]])]),s("li",null,[h(" Phone Number: "),o(r)==!1?(t(),u("span",L,k(o(e).phone_number),1)):m((t(),u("input",{key:1,"onUpdate:modelValue":i[2]||(i[2]=l=>o(e).phone_number=l)},null,512)),[[f,o(e).phone_number]])])]),o(r)?(t(),u("button",{key:0,onClick:x},"Submit")):C("",!0)]),o(p)?(t(),B(y,{key:0})):C("",!0)])}}};export{F as default};
