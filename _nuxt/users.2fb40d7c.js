import{a as g,b as i,u as C}from"./entry.57b5f51a.js";import{q as d,I as u,J as e,O as G,L as r,M as v,u as s,P as q,Q as w,R as x,U as y,V as $,H as A,z as J,y as H,x as S,W as B,X as Q,Y as W}from"./swiper-vue.f0e207ac.js";import{u as E}from"./cookie.57ac2f76.js";import{u as T}from"./fetch.33cd5848.js";const X={},Y={class:"datatables"};function j(p,a){return d(),u("div",Y,[e("table",null,[G(p.$slots,"default")])])}const K=g(X,[["render",j]]);const Z={class:"add-modal"},ee={class:"add-modal-con"},te=["value","selected"],oe={__name:"AddUser",setup(p){const a=C(),c=i("add_modal_is_active"),f=E("user_info"),{value:_}=i("user_types"),l=i("content_is_loading",()=>!1);let n={type_id:_.length>0?_[0].id:null};async function b(){l.value=!0,(await $fetch(`${a.public.baseURL}/api/user/add`,{method:"POST",headers:{Authorization:"Bearer "+f.value.token},body:JSON.stringify(n)})).user&&window.location.reload(!0)}return(m,t)=>(d(),u("div",Z,[e("div",{class:"add-modal-overlay modal-overlay",onClick:t[0]||(t[0]=()=>{c.value=!1})}),e("div",ee,[r(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s(n).username=o),placeholder:"Username",type:"text",required:""},null,512),[[v,s(n).username]]),r(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>s(n).email=o),placeholder:"Email",type:"email",required:""},null,512),[[v,s(n).email]]),r(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>s(n).password=o),placeholder:"Password",type:"password",requuired:""},null,512),[[v,s(n).password]]),r(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>s(n).password_confirmation=o),placeholder:"Confirm Password",type:"password",required:""},null,512),[[v,s(n).password_confirmation]]),r(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>s(n).phone_number=o),placeholder:"Phone Number",type:"text",required:""},null,512),[[v,s(n).phone_number]]),r(e("select",{"onUpdate:modelValue":t[6]||(t[6]=o=>s(n).type_id=o)},[(d(!0),u(w,null,x(s(_),(o,U)=>(d(),u("option",{key:U,value:o.id,selected:U==0},y(o.name),9,te))),128))],512),[[q,s(n).type_id]]),e("button",{onClick:b},"Add")])]))}},ne=g(oe,[["__scopeId","data-v-45025fc4"]]);const se={class:"edit-modal"},ae={class:"edit-modal-con"},le=["value"],de={style:{color:"black"}},ie={__name:"EditUser",setup(p){const a=C(),c=i("edit_modal_is_active"),f=E("user_info"),{value:_}=i("user_types"),l=i("user_to_edit").value;console.log(l);let n={username:l.username,email:l.email,phone_number:l.phone_number,type_id:l.type_id?l.type_id:1};async function b(){await $fetch(`${a.public.baseURL}/api/user/edit/${l.id}`,{method:"POST",headers:{Authorization:"Bearer "+f.value.token},body:JSON.stringify(n)}),window.location.reload(!0)}return(m,t)=>(d(),u("div",se,[e("div",{class:"edit-modal-overlay modal-overlay",onClick:t[0]||(t[0]=()=>{m.register_is_active=!1})}),e("div",ae,[r(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s(n).username=o),placeholder:"Username",type:"text",required:""},null,512),[[v,s(n).username]]),r(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>s(n).email=o),placeholder:"Email",type:"email",required:""},null,512),[[v,s(n).email]]),r(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>s(n).phone_number=o),placeholder:"Phone Number",type:"text",required:""},null,512),[[v,s(n).phone_number]]),r(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>s(n).type_id=o)},[(d(!0),u(w,null,x(s(_),(o,U)=>(d(),u("option",{key:U,value:o.id},y(o.name),9,le))),128))],512),[[q,s(n).type_id]]),e("p",de,y(m.message),1),e("a",{onClick:t[5]||(t[5]=o=>c.value=!1)},"Cancel"),$(" | "),e("a",{onClick:b},"Update")])]))}},re=g(ie,[["__scopeId","data-v-7c3f87d4"]]);const D=p=>(Q("data-v-a7d7a966"),p=p(),W(),p),ue={class:"users-page"},_e=D(()=>e("h2",{class:"page-title"},"Users",-1)),pe={class:"table-nav"},ce=D(()=>e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Username"),e("th",null,"Email"),e("th",null,"Phone Number"),e("th",null,"User Type"),e("th",null,"Action")])],-1)),me=["onClick"],ve=["onClick"],ye={__name:"users",async setup(p){let a,c;const f=C(),_=E("user_info"),l=i("add_modal_is_active",()=>!1),n=i("edit_modal_is_active",()=>!1),b=i("user_to_edit",()=>{}),m=i("content_is_loading");m.value=!0;const{data:t,pending:o,refresh:U}=([a,c]=A(()=>T(`${f.public.baseURL}/api/users`,{method:"GET",headers:{Authorization:"Bearer "+_.value.token}},"$5e9MclQqBH")),a=await a,c(),a),N=t.value,P=([a,c]=A(()=>$fetch(`${f.public.baseURL}/api/user/types`,{method:"GET",headers:{Authorization:"Bearer "+_.value.token}})),a=await a,c(),a);i("user_types",()=>P),m.value=!1;function I(k){n.value=!0,b.value=k}async function L(k){m.value=!0,await T(`${f.public.baseURL}/api/user/${k}`,{method:"DELETE",headers:{Authorization:"Bearer "+_.value.token}},"$wEBGSPm0FW"),window.location.reload(!0)}return(k,V)=>{const R=K,z=ne,M=re;return d(),u(w,null,[e("div",ue,[_e,e("div",pe,[e("a",{onClick:V[0]||(V[0]=()=>l.value=!s(l))},"Add")]),J(R,null,{default:H(()=>[ce,e("tbody",null,[(d(!0),u(w,null,x(s(N),(h,F)=>(d(),u("tr",{key:F},[e("td",null,y(h.id),1),e("td",null,y(h.username),1),e("td",null,y(h.email),1),e("td",null,y(h.phone_number),1),e("td",null,y(h.type),1),e("td",null,[$("("),e("a",{onClick:O=>I(h)},"Edit",8,me),$(),e("a",{onClick:O=>L(h.id)},"Delete",8,ve),$(")")])]))),128))])]),_:1})]),s(l)?(d(),S(z,{key:0})):B("",!0),s(n)?(d(),S(M,{key:1})):B("",!0)],64)}}},ke=g(ye,[["__scopeId","data-v-a7d7a966"]]);export{ke as default};
