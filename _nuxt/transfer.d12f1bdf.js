import{a as k,H as A,L as a,U as m,W as y,V as _,u as t,R as f,Q as I,O as T,q as $,I as x,J as B}from"./swiper-vue.cf378b39.js";import{a as C,u as D,b as L}from"./entry.93a1389f.js";import{u as h}from"./fetch.52ca4c6c.js";import{u as R}from"./cookie.c4b0a78d.js";const v=r=>(x("data-v-67e90224"),r=r(),B(),r),O=v(()=>a("h2",{class:"page-title"},"Transfer",-1)),N=["onSubmit"],z=v(()=>a("button",{class:"btn-input btn-input--search",type:"submit"},"Search",-1)),J={class:"user-details"},K=["value"],W=["value"],E=["onSubmit"],F=v(()=>a("button",{class:"btn-input btn-input--load"},"Load Coins",-1)),G={class:"error-message"},M={__name:"transfer",setup(r){const d=L(),c=R("user_info"),i=D("user_details"),b=k(),p={value:null};let n={id:null,username:null,coins:null,amount:null};async function w(){var o;const{data:e,pending:s,refresh:u}=await h(`${d.public.baseURL}/api/user/search/${p.value}`,{method:"GET",headers:{Authorization:"Bearer "+c.value.token}},"$VpKtR1QDXy");e.value?(i.value=e.value,n.id=e.value.id,n.username=e.value.username,n.email=e.value.email,n.phone_number=e.value.phone_number,n.coins=(o=e==null?void 0:e.value.coins[0])==null?void 0:o.coin_balance):console.log("An error occurred")}async function U(){const e=await V(n.amount);if(e.success>0){const{data:s,pending:u,refresh:o}=await h(`${d.public.baseURL}/api/coins/load`,{method:"POST",body:JSON.stringify({user_id:n.id,amount:n.amount}),headers:{Authorization:"Bearer "+c.value.token}},"$GesZZKWeDh");s.value?(i.value=s.value,window.location.reload(!0)):console.log("An error occurred")}else b.value=e.message}async function V(e){const{data:s,pending:u,refresh:o}=await h(`${d.public.baseURL}/api/wallet/deduct`,{method:"POST",body:JSON.stringify({amount:e}),headers:{Authorization:"Bearer "+c.value.token}},"$sk3yKiVnfh");if(!s)console.log("An error occurred");else return s.value}return(e,s)=>{var u,o,g,S;return $(),A(T,null,[O,a("form",{onSubmit:y(w,["prevent"])},[m(a("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>p.value=l),placeholder:"ID / Username"},null,512),[[_,p.value]]),z],40,N),a("div",J,[a("p",null,[m(a("input",{"onUpdate:modelValue":s[1]||(s[1]=l=>t(n).id=l),disabled:""},null,512),[[_,t(n).id]]),f(": ID")]),a("p",null,[a("input",{value:((u=t(i))==null?void 0:u.username)||"",disabled:""},null,8,K),f(": Username")]),a("p",null,[a("input",{value:((S=(g=(o=t(i))==null?void 0:o.coins)==null?void 0:g[0])==null?void 0:S.coin_balance)||0,disabled:""},null,8,W),f(": Coin balance")]),a("form",{onSubmit:y(U,["prevent"])},[m(a("input",{"onUpdate:modelValue":s[2]||(s[2]=l=>t(n).amount=l),placeholder:"Amount"},null,512),[[_,t(n).amount]]),F],40,E),a("p",G,I(t(b)),1)])],64)}}},H=C(M,[["__scopeId","data-v-67e90224"]]);export{H as default};
