import{a as T,j as q,q as r,I as _,J as e,O as Q,P as v,L as m,M as g,u as s,Q as B,R as U,U as V,V as k,H as S,z as j,y as W,x as D,W as A,X,Y}from"./swiper-vue.cbd03ad1.js";import{a as P,b as i,u as w}from"./entry.44c72d57.js";import{u as x}from"./cookie.014ff6f7.js";import{u as K}from"./fetch.8db9e64a.js";const Z={class:"datatables"},ee={class:"pagination"},te=["disabled"],oe=["disabled"],ne=10,se={__name:"datatables",props:{onPageChange:Function},setup(f){const l=f,a=T(1),c=T(100),u=q(()=>Math.ceil(c.value/ne));function d(){a.value>1&&(a.value--,l.onPageChange(a.value))}function o(){a.value<u.value&&(a.value++,l.onPageChange(a.value))}return(p,h)=>(r(),_("div",Z,[e("table",null,[Q(p.$slots,"default",{currentPage:a.value})]),e("div",ee,[e("button",{onClick:d,disabled:a.value===1},"Previous",8,te),e("span",null,v(a.value)+" / "+v(u.value),1),e("button",{onClick:o,disabled:a.value===u.value},"Next",8,oe)])]))}};const ae={class:"add-modal"},le={class:"add-modal-con"},ie=["value","selected"],de={__name:"AddUser",setup(f){const l=w(),a=i("add_modal_is_active"),c=x("user_info"),{value:u}=i("user_types"),d=i("content_is_loading",()=>!1);let o={type_id:u.length>0?u[0].id:null};async function p(){d.value=!0,(await $fetch(`${l.public.baseURL}/api/user/add`,{method:"POST",headers:{Authorization:"Bearer "+c.value.token},body:JSON.stringify(o)})).user&&window.location.reload(!0)}return(h,t)=>(r(),_("div",ae,[e("div",{class:"add-modal-overlay modal-overlay",onClick:t[0]||(t[0]=()=>{a.value=!1})}),e("div",le,[m(e("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>s(o).username=n),placeholder:"Username",type:"text",required:""},null,512),[[g,s(o).username]]),m(e("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>s(o).email=n),placeholder:"Email",type:"email",required:""},null,512),[[g,s(o).email]]),m(e("input",{"onUpdate:modelValue":t[3]||(t[3]=n=>s(o).password=n),placeholder:"Password",type:"password",requuired:""},null,512),[[g,s(o).password]]),m(e("input",{"onUpdate:modelValue":t[4]||(t[4]=n=>s(o).password_confirmation=n),placeholder:"Confirm Password",type:"password",required:""},null,512),[[g,s(o).password_confirmation]]),m(e("input",{"onUpdate:modelValue":t[5]||(t[5]=n=>s(o).phone_number=n),placeholder:"Phone Number",type:"text",required:""},null,512),[[g,s(o).phone_number]]),m(e("select",{"onUpdate:modelValue":t[6]||(t[6]=n=>s(o).type_id=n)},[(r(!0),_(U,null,V(s(u),(n,C)=>(r(),_("option",{key:C,value:n.id,selected:C==0},v(n.name),9,ie))),128))],512),[[B,s(o).type_id]]),e("button",{onClick:p},"Add")])]))}},ue=P(de,[["__scopeId","data-v-45025fc4"]]);const re={class:"edit-modal"},_e={class:"edit-modal-con"},ce=["value"],pe={style:{color:"black"}},me={__name:"EditUser",setup(f){const l=w(),a=i("edit_modal_is_active"),c=x("user_info"),{value:u}=i("user_types"),d=i("user_to_edit").value;let o={username:d.username,email:d.email,phone_number:d.phone_number,type_id:d.type_id?d.type_id:1};async function p(){await $fetch(`${l.public.baseURL}/api/user/edit/${d.id}`,{method:"POST",headers:{Authorization:"Bearer "+c.value.token},body:JSON.stringify(o)}),window.location.reload(!0)}return(h,t)=>(r(),_("div",re,[e("div",{class:"edit-modal-overlay modal-overlay",onClick:t[0]||(t[0]=()=>{h.register_is_active=!1})}),e("div",_e,[m(e("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>s(o).username=n),placeholder:"Username",type:"text",required:""},null,512),[[g,s(o).username]]),m(e("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>s(o).email=n),placeholder:"Email",type:"email",required:""},null,512),[[g,s(o).email]]),m(e("input",{"onUpdate:modelValue":t[3]||(t[3]=n=>s(o).phone_number=n),placeholder:"Phone Number",type:"text",required:""},null,512),[[g,s(o).phone_number]]),m(e("select",{"onUpdate:modelValue":t[4]||(t[4]=n=>s(o).type_id=n)},[(r(!0),_(U,null,V(s(u),(n,C)=>(r(),_("option",{key:C,value:n.id},v(n.name),9,ce))),128))],512),[[B,s(o).type_id]]),e("p",pe,v(h.message),1),e("a",{onClick:t[5]||(t[5]=n=>a.value=!1)},"Cancel"),k(" | "),e("a",{onClick:p},"Update")])]))}},ve=P(me,[["__scopeId","data-v-80a667d5"]]);const fe={class:"delete-modal"},ye={class:"delete-modal-con"},he={__name:"DeleteUser",setup(f){const l=w(),a=i("delete_modal_is_active"),c=x("user_info"),{value:u}=i("user_types"),d=i("content_is_loading",()=>!1),o=i("user_to_delete").value;u.length>0&&u[0].id;async function p(){d.value=!0,await $fetch(`${l.public.baseURL}/api/user/delete/${o.id}`,{method:"DELETE",headers:{Authorization:"Bearer "+c.value.token}}),window.location.reload(!0)}return(h,t)=>(r(),_("div",fe,[e("div",{class:"delete-modal-overlay modal-overlay",onClick:t[0]||(t[0]=()=>{a.value=!1})}),e("div",ye,[e("button",{onClick:t[1]||(t[1]=n=>a.value=!1)},"Cancel"),e("button",{onClick:p},"Delete")])]))}},ge=P(he,[["__scopeId","data-v-ef5870e5"]]);const I=f=>(X("data-v-fb81988e"),f=f(),Y(),f),be={class:"users-page"},Ce=I(()=>e("h2",{class:"page-title"},"Users",-1)),$e={class:"table-nav"},ke=I(()=>e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Username"),e("th",null,"Email"),e("th",null,"Phone Number"),e("th",null,"User Type"),e("th",null,"Action")])],-1)),Ue=["onClick"],Pe=["onClick"],we={__name:"users",async setup(f){let l,a;const c=w(),u=x("user_info"),d=i("add_modal_is_active",()=>!1),o=i("edit_modal_is_active",()=>!1),p=i("delete_modal_is_active",()=>!1),h=i("user_to_edit",()=>{}),t=i("user_to_delete",()=>{}),n=i("content_is_loading");n.value=!0;const{data:C,pending:xe,refresh:De}=([l,a]=S(()=>K(`${c.public.baseURL}/api/users`,{method:"GET",headers:{Authorization:"Bearer "+u.value.token}},"$5e9MclQqBH")),l=await l,a(),l),N=C.value,L=([l,a]=S(()=>$fetch(`${c.public.baseURL}/api/user/types`,{method:"GET",headers:{Authorization:"Bearer "+u.value.token}})),l=await l,a(),l);i("user_types",()=>L),n.value=!1;function M(y){o.value=!0,h.value=y}async function R(y){p.value=!0,t.value=y}function z(y){console.log("Current page:",y)}return q(()=>{const y=(currentPage-1)*itemsPerPage,$=y+itemsPerPage;return[].slice(y,$)}),(y,$)=>{const E=se,F=ue,O=ve,J=ge;return r(),_(U,null,[e("div",be,[Ce,e("div",$e,[e("a",{onClick:$[0]||($[0]=()=>d.value=!s(d))},"Add")]),j(E,{onPageChange:z},{default:W(()=>[ke,e("tbody",null,[(r(!0),_(U,null,V(s(N),(b,G)=>(r(),_("tr",{key:G},[e("td",null,v(b.id),1),e("td",null,v(b.username),1),e("td",null,v(b.email),1),e("td",null,v(b.phone_number),1),e("td",null,v(b.type),1),e("td",null,[k("("),e("a",{onClick:H=>M(b)},"Edit",8,Ue),k(),e("a",{onClick:H=>R(b)},"Delete",8,Pe),k(")")])]))),128))])]),_:1})]),s(d)?(r(),D(F,{key:0})):A("",!0),s(o)?(r(),D(O,{key:1})):A("",!0),s(p)?(r(),D(J,{key:2})):A("",!0)],64)}}},Se=P(we,[["__scopeId","data-v-fb81988e"]]);export{Se as default};
