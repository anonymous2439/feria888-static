import{a as I,u as w,b as V}from"./entry.3be64904.js";import{q as a,H as l,L as e,V as v,W as g,u as n,I as N,J as D,a as P,M as R,U as y,Q as r,N as T,O as A,P as B,x as M}from"./swiper-vue.ab7c0c95.js";import{u as k}from"./fetch.8d7b9169.js";import{u as E}from"./cookie.1a36ff8d.js";const O=d=>(N("data-v-7da04d97"),d=d(),D(),d),j={class:"cpassword-modal"},z={class:"cpassword-modal-con"},J=O(()=>e("h2",null,"Change Password",-1)),q=O(()=>e("br",null,null,-1)),G={__name:"ChangePassword",setup(d){const h=V(),f=w("cpassword_is_active"),m=E("user_info");let t={current_password:"",new_password:"",new_password_confirmation:""};async function p(){const{data:b,pending:s,refresh:i}=await k(`${h.public.baseURL}/api/user/changepassword`,{method:"POST",body:JSON.stringify(t),headers:{Authorization:"Bearer "+m.value.token}},"$hbqUopKmcA");m.value=b.value,window.location.reload(!0)}return(b,s)=>(a(),l("div",j,[e("div",{class:"cpassword-modal-overlay modal-overlay",onClick:s[0]||(s[0]=()=>{f.value=!1})}),e("div",z,[J,q,v(e("input",{"onUpdate:modelValue":s[1]||(s[1]=i=>n(t).current_password=i),placeholder:"Current Password",type:"password"},null,512),[[g,n(t).current_password]]),v(e("input",{"onUpdate:modelValue":s[2]||(s[2]=i=>n(t).new_password=i),placeholder:"New Password",type:"password"},null,512),[[g,n(t).new_password]]),v(e("input",{"onUpdate:modelValue":s[3]||(s[3]=i=>n(t).new_password_confirmation=i),placeholder:"Confirm New Password",type:"password"},null,512),[[g,n(t).new_password_confirmation]]),e("button",{onClick:s[4]||(s[4]=i=>f.value=!1),class:"btn-input btn-input--cancel"},"Cancel"),e("button",{onClick:p,class:"btn-input btn-input--submit"},"Submit")])]))}},Q=I(G,[["__scopeId","data-v-7da04d97"]]);const u=d=>(N("data-v-cbb612f8"),d=d(),D(),d),H={class:"profile-page"},K={class:"wrapper"},W=u(()=>e("h2",{class:"page-title"},"User Profile",-1)),X=u(()=>e("br",null,null,-1)),Y={class:"profile-nav"},Z=u(()=>e("span",{class:"slider round"},"EDIT",-1)),ee=u(()=>e("a",{class:"btn-input btn-input--cashout",href:"javascript:;"},"Cash Out",-1)),se=u(()=>e("b",null,"Email:",-1)),ne={key:0},te=u(()=>e("b",null,"Phone Number:",-1)),oe={key:0},ae=u(()=>e("b",null,"Coin Balance:",-1)),le={key:1,class:"online-agents"},ie=u(()=>e("h2",null,"Available Agents:",-1)),re=["href"],ue={class:"transactions"},de=u(()=>e("h2",null,"Transactions",-1)),ce=u(()=>e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"From"),e("th",null,"Transaction Type"),e("th",null,"Amount"),e("th",null,"Date")])],-1)),pe={__name:"profile",async setup(d){let h,f;const m=V(),t=E("user_info").value,p=w("is_editing_profile",()=>!1),b=w("cpassword_is_active",()=>!1),s=w("profile_form",()=>{});w("user_search"),P();const i=P(),x=P(!1);s.value={email:t.user.email,phone_number:t.user.phone_number,coins:t.user.coins.length>0?t.user.coins[0].coin_balance:0};function F(){p.value=!p.value}const{data:S,pending:_e,refresh:he}=([h,f]=R(()=>k(`${m.public.baseURL}/api/transactions/get`,{method:"GET",headers:{Authorization:"Bearer "+t.token}},"$62j1b1lrVm")),h=await h,f(),h);console.log(S);async function L(){const{data:_,pending:c,refresh:C}=await k(`${m.public.baseURL}/api/user/update`,{method:"POST",headers:{Authorization:"Bearer "+t.token},body:JSON.stringify(s.value)},"$BME5qJrpDM");_&&(console.log(t),console.log(_.value),t.user=_.value.user)}async function U(){const{data:_,pending:c,refresh:C}=await k(`${m.public.baseURL}/api/agents/online`,{method:"GET",headers:{Authorization:"Bearer "+t.token}},"$FTQtyeom9v");_?(i.value=_.value.agents,x.value=!0):console.log("An error occurred")}return(_,c)=>{const C=Q;return a(),l("div",H,[e("div",K,[W,X,e("div",Y,[e("a",null,[e("label",{class:"switch"},[e("input",{type:"checkbox",onClick:F}),Z])]),e("a",{onClick:c[0]||(c[0]=o=>b.value=!0),class:"btn-input btn-input--change"},"Change Password"),e("a",{class:"btn-input btn-input--cashin",href:"javascript:;",onClick:U},"Cash In"),ee]),e("ul",null,[e("li",null,[se,y("   "),n(p)==!1?(a(),l("span",ne,r(n(s).email),1)):v((a(),l("input",{key:1,"onUpdate:modelValue":c[1]||(c[1]=o=>n(s).email=o),type:"email"},null,512)),[[g,n(s).email]])]),e("li",null,[te,y("   "),n(p)==!1?(a(),l("span",oe,r(n(s).phone_number),1)):v((a(),l("input",{key:1,"onUpdate:modelValue":c[2]||(c[2]=o=>n(s).phone_number=o)},null,512)),[[g,n(s).phone_number]])]),e("li",null,[ae,y("   "),e("span",null,r(n(s).coins),1)])]),n(p)?(a(),l("button",{key:0,onClick:L,class:"btn-input btn-input--submit"},"Submit")):T("",!0),n(x)?(a(),l("div",le,[ie,e("a",{class:"btn-input btn-input--refresh",href:"javascript:;",onClick:U},"Refresh"),e("ul",null,[(a(!0),l(A,null,B(n(i),(o,$)=>(a(),l("li",{key:$},[y(r(o.user.username)+" - ",1),e("a",{href:o.link,target:"_blank"},r(o.link||"link not set"),9,re)]))),128))])])):T("",!0),e("div",ue,[de,e("table",null,[ce,e("tbody",null,[(a(!0),l(A,null,B(n(S),(o,$)=>(a(),l("tr",{key:$},[e("td",null,r(o.id),1),e("td",null,r(o.from_user.username),1),e("td",null,r(o.type),1),e("td",null,r(o.amount),1),e("td",null,r(o.formatted_date),1)]))),128))])])])]),n(b)?(a(),M(C,{key:0})):T("",!0)])}}},ve=I(pe,[["__scopeId","data-v-cbb612f8"]]);export{ve as default};
