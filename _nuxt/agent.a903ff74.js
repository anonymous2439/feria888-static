import{a as q,u as O,b as F}from"./entry.35aba0d1.js";import{a as y,M as H,H as S,L as e,Q as m,u as s,O as J,U as _,X as M,V as A,W as w,q as $,I as K,J as Z}from"./swiper-vue.ab7c0c95.js";import{u as h}from"./fetch.6fb8fcfe.js";import{u as Y}from"./cookie.77da8818.js";const i=v=>(K("data-v-d1052ad0"),v=v(),Z(),v),ee={class:"profile-page"},ae={class:"wrapper"},ne=i(()=>e("h2",{class:"page-title"},"Agent Panel",-1)),se=i(()=>e("br",null,null,-1)),te={class:"agent-nav"},oe=i(()=>e("b",null,"Coin Balance: ",-1)),le=i(()=>e("b",null,"Wallet Ballance: ",-1)),ie=i(()=>e("b",null,"Link: ",-1)),re=["href","value"],ue=i(()=>e("a",{href:"javascript:;"},"Save",-1)),ce=["href"],de={class:"agent-panel"},pe=i(()=>e("h2",{class:"page-title"},"Transfer",-1)),_e=["onSubmit"],he=i(()=>e("button",{type:"submit"},"Search",-1)),me={class:"user-details"},ve=["value"],fe=["value"],be=["onSubmit"],ge=i(()=>e("button",null,"Load Coins",-1)),ke={class:"error-message"},ye={__name:"agent",async setup(v){let r,f;const d=F(),o=Y("user_info").value,L=O("profile_form",()=>{}),b=O("user_search"),U=y(),l=y(),g=y(!1);L.value={email:o.user.email,phone_number:o.user.phone_number,coins:o.user.coins.length>0?o.user.coins[0].coin_balance:0};const k={value:null};let t={id:null,username:null,coins:null,amount:null};const{data:C}=([r,f]=H(()=>h(`${d.public.baseURL}/api/agent/info`,{method:"GET",headers:{Authorization:"Bearer "+o.token}},"$N76yNykovQ")),r=await r,f(),r);C&&(l.value=C,console.log(l));async function P(){var u;const{data:a,pending:n,refresh:p}=await h(`${d.public.baseURL}/api/user/search/${k.value}`,{method:"GET",headers:{Authorization:"Bearer "+o.token}},"$555HzAZetK");a.value?(b.value=a.value,t.id=a.value.id,t.username=a.value.username,t.email=a.value.email,t.phone_number=a.value.phone_number,t.coins=(u=a==null?void 0:a.value.coins[0])==null?void 0:u.coin_balance):console.log("An error occurred")}async function Q(){const a=await W(t.amount);if(a.success>0){const{data:n,pending:p,refresh:u}=await h(`${d.public.baseURL}/api/coins/load`,{method:"POST",body:JSON.stringify({user_id:t.id,amount:t.amount}),headers:{Authorization:"Bearer "+o.token}},"$uUzxi01HnQ");n.value?b.value=n.value:console.log("An error occurred")}else U.value=a.message}async function W(a){const{data:n,pending:p,refresh:u}=await h(`${d.public.baseURL}/api/wallet/deduct`,{method:"POST",body:JSON.stringify({amount:a}),headers:{Authorization:"Bearer "+o.token}},"$kIx7Haob48");if(!n)console.log("An error occurred");else return n.value}const{data:B,pending:Se,refresh:Ae}=([r,f]=H(()=>h(`${d.public.baseURL}/api/agent/info`,{method:"GET",headers:{Authorization:"Bearer "+o.token}},"$hAkKzLXCRA")),r=await r,f(),r);B?l.value=B.value:console.log("An error occurred");async function X(){const{data:a,pending:n,refresh:p}=await h(`${d.public.baseURL}/api/agent/status/change`,{method:"GET",headers:{Authorization:"Bearer "+o.token}},"$qSGDNSLi4X");a&&(l.value=a.value.agent)}return(a,n)=>{var p,u,T,x,z,I,R,N,j,E,V,D,G;return $(),S("div",ee,[e("div",ae,[ne,se,e("div",te,[e("a",{onClick:X,href:"javascript:;"},m((p=s(l))==null?void 0:p.status),1)]),e("ul",null,[e("li",null,[oe,e("span",null,m(s(L).coins),1)]),e("li",null,[le,e("span",null,m(((z=(x=(T=(u=s(o))==null?void 0:u.user)==null?void 0:T.wallets)==null?void 0:x[0])==null?void 0:z.wallet_balance)||0),1)]),e("li",null,[ie,s(g)?($(),S(J,{key:0},[e("input",{href:((I=s(l))==null?void 0:I.link)||"javascript:;",target:"_blank",value:((R=s(l))==null?void 0:R.link)||"Link not set"},null,8,re),_(" - "),e("a",{href:"javascript:;",onClick:n[0]||(n[0]=c=>g.value=!1)},"Cancel"),_(" | "),ue],64)):($(),S(J,{key:1},[e("a",{href:((N=s(l))==null?void 0:N.link)||"javascript:;",target:"_blank"},m(((j=s(l))==null?void 0:j.link)||"Link not set"),9,ce),_(" - "),e("a",{href:"javascript:;",onClick:n[1]||(n[1]=c=>g.value=!0)},"Edit")],64))])]),e("div",de,[pe,e("form",{onSubmit:M(P,["prevent"])},[A(e("input",{"onUpdate:modelValue":n[2]||(n[2]=c=>k.value=c),placeholder:"ID / Username"},null,512),[[w,k.value]]),he],40,_e),e("div",me,[e("p",null,[_("ID: "),A(e("input",{"onUpdate:modelValue":n[3]||(n[3]=c=>s(t).id=c),disabled:""},null,512),[[w,s(t).id]])]),e("p",null,[_("Username: "),e("input",{value:((E=s(b))==null?void 0:E.username)||"",disabled:""},null,8,ve)]),e("p",null,[_("Coin balance: "),e("input",{value:((G=(D=(V=s(b))==null?void 0:V.coins)==null?void 0:D[0])==null?void 0:G.coin_balance)||0,disabled:""},null,8,fe)]),e("form",{onSubmit:M(Q,["prevent"])},[A(e("input",{"onUpdate:modelValue":n[4]||(n[4]=c=>s(t).amount=c),placeholder:"Amount"},null,512),[[w,s(t).amount]]),ge],40,be),e("p",ke,m(s(U)),1)])])])])}}},Ce=q(ye,[["__scopeId","data-v-d1052ad0"]]);export{Ce as default};
